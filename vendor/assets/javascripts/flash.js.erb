var Flash = new Object();

Flash.data = {};

Flash.transferFromCookies = function() {
  var data = JSON.parse(unescape(Cookie.read("flash") || '{}'));
  if(!data) data = {};
  Flash.data = data;
  Cookie.write('flash', null, {path: '/', domain: '<%=CacheableFlash::Config.config[:domain]%>'});
};

Flash.writeDataTo = function(name, element, callback) {
  var message = "";
  if (Flash.data[name]) {
    message = Flash.data[name].toString().replace(/\+/g, ' ');
    element.textContent = message;
    if (callback && typeof(callback) === 'function') {
      callback(element);
    } else {
      element.show();
    }
  }
};
